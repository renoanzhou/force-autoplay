<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="./lib/eruda.min.js"></script>
    <!-- <script src="./plugins/wechat.js"></script> -->
    <script>
      eruda.init();
    </script>
  </head>
  <body>
    <!-- <video id="video" controls src="https://mpv.videocc.net/46c10ad8d2/1/46c10ad8d28e8eaf05ea58558530d2a1_1.mp4"></video> -->
    <div id="btn">play</div>
    <script>
      // const media = document.querySelector('#video')
      const media = document.createElement("video");
      // media.play()

      // function force({
      //   dom,
      //   src
      // }) {
      //   return new Promise((resolve) => {
      //     setTimeout(() => {
      //       resolve(1);
      //     }, 1000)
      //   }).then(() => {
      //     const media = document.createElement('video');
      //     media.src = src;
      //     dom.addEventListener('touchstart', () => {
      //       console.log('touchstart')
      //       console.log(media.src)
      //       document.body.appendChild(media)
      //       media.play();
      //     })
      //   })
      // }

      // force({
      //   dom: document.querySelector('#btn'),
      //   src: 'https://mpv.videocc.net/46c10ad8d2/1/46c10ad8d28e8eaf05ea58558530d2a1_1.mp4'
      // }).then(() => {
      //   console.log('force autoplay success')
      // })

      new Promise((resolve) => {
        setTimeout(() => {
          resolve(media);
        }, 1000)
      }).then((media) => {
        return new Promise((resolve) => {
          setTimeout(() => {
            console.log(media)
            resolve(media)
          }, 0)
        })
      }).then((media) => {
        console.log(media)
        console.log('resovle')
        let element = document.querySelector("#btn")
        let type = 'add'
        if (!Array.isArray(element)) element = [element];

        element.forEach((elementItem) => {
          if (type === "add") {
            elementItem.addEventListener("click", () => {
              media.src =
          "https://mpv.videocc.net/46c10ad8d2/1/46c10ad8d28e8eaf05ea58558530d2a1_1.mp4";
              media.play()
              document.body.appendChild(media);
            });
            elementItem.addEventListener("touchstart", () => {
              media.src =
          "https://mpv.videocc.net/46c10ad8d2/1/46c10ad8d28e8eaf05ea58558530d2a1_1.mp4";
              media.play()
              document.body.appendChild(media);
            });
          }
        });
      })

      function handleClick(e) {
        console.log(e);
        media.muted = true;
        media.src =
          "https://mpv.videocc.net/46c10ad8d2/1/46c10ad8d28e8eaf05ea58558530d2a1_1.mp4";
        media.play();
        document.body.appendChild(media);
      }
    </script>
  </body>
</html>
